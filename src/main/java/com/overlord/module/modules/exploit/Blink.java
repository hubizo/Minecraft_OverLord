package com.overlord.module.modules.exploit;

import com.overlord.module.Category;
import com.overlord.module.Module;
import net.minecraft.network.packet.Packet;
import net.minecraft.util.math.Vec3d;

import java.util.ArrayList;
import java.util.List;

public class Blink extends Module {
    private final List<Packet<?>> packets = new ArrayList<>();
    private Vec3d startPos;
    
    public Blink() {
        super("Blink", "Queues movement packets", Category.EXPLOIT);
    }
    
    @Override
    public void onEnable() {
        if (mc.player != null) {
            startPos = mc.player.getPos();
        }
        packets.clear();
    }
    
    @Override
    public void onDisable() {
        if (mc.player != null && mc.player.networkHandler != null) {
            for (Packet<?> packet : packets) {
                mc.player.networkHandler.getConnection().send(packet);
            }
        }
        packets.clear();
    }
    
    public void queuePacket(Packet<?> packet) {
        if (isEnabled()) {
            packets.add(packet);
        }
    }
    
    public int getQueueSize() {
        return packets.size();
    }
    
    public Vec3d getStartPos() {
        return startPos;
    }
}
